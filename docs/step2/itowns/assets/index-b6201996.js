(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const s of t.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function d(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function n(e){if(e.ep)return;e.ep=!0;const t=d(e);fetch(e.href,t)}})();itowns.enableDracoLoader("./draco/");const u=document.getElementById("viewerDiv"),y={coord:new itowns.Coordinates("EPSG:4326",139.753629,35.685135,0),heading:-50,range:7e3,tilt:22},o=new itowns.GlobeView(u,y);o.tileLayer.noTextureColor=new itowns.THREE.Color(9814497);o.getLayerById("atmosphere").visible=!1;o.getLayerById("atmosphere").fog.enable=!1;const m=new itowns.THREE.AmbientLight(16777215,1);o.scene.add(m);const p=new itowns.VectorTilesSource({style:"https://tile.openstreetmap.jp/styles/maptiler-basic-ja/style.json"}),f=new itowns.ColorLayer("MVT",{source:p,zoom:{min:10,max:18},addLabelLayer:{performance:!0}});o.addLayer(f);const w=new itowns.WMTSSource({url:"http://wxs.ign.fr/3ht7xcw6f7nciopo16etuqp2/geoportail/wmts",crs:"EPSG:4326",name:"ELEVATION.ELEVATIONGRIDCOVERAGE.SRTM3",tileMatrixSet:"WGS84G",format:"image/x-bil;bits=32",zoom:{min:3,max:10}}),L=new itowns.ElevationLayer("MNT_WORLD",{source:w});o.addLayer(L);function a(r){r.source=new itowns.WMTSSource(r.source),o.addLayer(new itowns.ElevationLayer(r.id,r))}itowns.Fetcher.json("/src/json/IGN_MNT_HIGHRES.json").then(a);itowns.Fetcher.json("/src/json/WORLD_DTM.json").then(a);const h={version:8,sources:{"indigo-plateau-lod0":{type:"vector",tiles:["https://indigo-lab.github.io/plateau-lod2-mvt/{z}/{x}/{y}.pbf"],minzoom:10,maxzoom:16,attribution:"a href='https://github.com/indigo-lab/plateau-tokyo23ku-building-mvt-2020'plateau-tokyo23ku-building-mvt-2020 by indigo-lab/a (a href='https://www.mlit.go.jp/plateau/'国土交通省 Project PLATEAU/a のデータを加工して作成)"}},layers:[{id:"fill-extrusion-bldg-lod0",type:"fill-extrusion",source:"indigo-plateau-lod0","source-layer":"bldg"}]},g=new itowns.VectorTilesSource({style:h}),l=new itowns.FeatureGeometryLayer("VTBuilding",{source:g,zoom:{min:14},addLabelLayer:{performance:!0,forceClampToTerrain:!0},accurate:!1,style:{fill:{color:"#27ae60",base_altitude:36,extrusion_height:r=>r.z||100}}});l.opacity=.4;o.addLayer(l);const c=new itowns.C3DTilesLayer("3dtiles",{name:"3dtl",source:new itowns.C3DTilesSource({url:"https://assets.cms.plateau.reearth.io/assets/22/a919cc-1c92-4165-8adc-fcc534251b63/13100_tokyo23-ku_2022_3dtiles_1_1_op_bldg_13101_chiyoda-ku_lod2_no_texture/tileset.json"})},o);c.opacity=.7;itowns.View.prototype.addLayer.call(o,c);const b=new itowns.FileSource({url:"/geojson/landmark.geojson",crs:"EPSG:4326",format:"application/json"}),E=new itowns.Style({stroke:{color:"#04CFE4"},point:{color:"white",line:"#E83929",radius:3},text:{field:"{名称}",anchor:"bottom-left",size:12,haloColor:"white",haloWidth:1,font:["monospace"]}}),S=new itowns.ColorLayer("cities",{source:b,style:E,addLabelLayer:!0});o.addLayer(S);
